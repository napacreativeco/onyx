{{ 'component--product-highlight-slider.css' | asset_url | stylesheet_tag }}

<div class="product-highlight-slider-row">
    <div class="product-highlights swiper">
        <div class="swiper-wrapper">
            
            {% for block in section.blocks %}
                <div class="swiper-slide">

                    <div class="image" style="opacity: {{ block.settings.image_opacity }};">

                        {% comment %}
                        //========================
                        // PRODUCT
                        //========================
                        {% endcomment %}
                        {% if block.type == 'product' %}
                            {% if block.settings.image != blank %}
                                <img width="100%" height="100%" src="{{ block.settings.image | image_url: width: 2200  }}" alt="{{ block.settings.image.alt }}" />
                            {% else %}
                                <img width="100%" height="100%" src="{{ block.settings.slide_product.featured_image | image_url: width: 2200  }}" alt="{{ block.settings.slide_product.featured_image.alt }}" />
                            {% endif %}
                        {% endif %}

                        {% comment %}
                        //========================
                        // COLLECTION
                        //========================
                        {% endcomment %}
                        {% if block.type == 'collection' %}
                            {% if block.settings.image != blank %}
                                <img width="100%" height="100%" src="{{ block.settings.image | image_url: width: 2200  }}" alt="{{ block.settings.image.alt }}" />
                            {% else %}
                                <img width="100%" height="100%" src="{{ block.settings.slide_collection.image | image_url: width: 2200  }}" alt="{{ block.settings.slide_collection.image.alt }}" />
                            {% endif %}
                        {% endif %}

                        {% comment %}
                        //========================
                        // TEXT BLOCK
                        //========================
                        {% endcomment %}
                        {% if block.type == 'text' %}
                            {% if block.settings.image != blank %}
                                <img width="100%" height="100%" src="{{ block.settings.image | image_url: width: 2200  }}" alt="{{ block.settings.image.alt }}" />
                            {% else %}
                                <div class="background-color" style="background-color: {{ block.settings.color }};"></div>
                            {% endif %}
                        {% endif %}

                    </div>

                    <div class="overlay">
                        <div class="subtitle">
                            <p>{{ block.settings.slide_subtitle }}</p>
                        </div>
                        <div class="title">
                            <h2>{{ block.settings.slide_title }}</h2>
                        </div>
                        <div class="text">
                            <p>{{ block.settings.slide_text }}</p>
                        </div>

                        <div class="controls">
                            <div class="view-more">
                                <a href="{{ section.settings.spotlight_slider_collection.url }}" title="{{ section.settings.spotlight_slider_collection.title }}">
                                    {{ 'View more' | escape }}
                                </a>
                            </div>
                            <div class="slide-controls">
                                <div class="swiper-button-prev slide-control">{% render 'icon--arrow-left' %}</div>
                                <div class="swiper-button-next slide-control">{% render 'icon--arrow-right' %}</div>
                            </div>
                        </div>

                    </div>

                </div>
            {% endfor %}
            
        </div>
        

        <div class="swiper-pagination"></div>

    </div>
</div>

{% schema %}
    {
      "name": "Product Highlight Slider",
      "tag": "section",
      "class": "product-highlight-slider",
      "settings": [
        {
            "type": "range",
            "id": "side_padding",
            "label": "Side Padding",
            "min": 0,
            "max": 24,
            "step": 1,
            "default": 12
        },
        {
            "type": "range",
            "id": "bottom_margin",
            "label": "Space Below",
            "default": 60,
            "min": 30,
            "max": 100,
            "step": 1
        }
      ],
      "blocks": [
        {
            "type": "product",
            "name": "Product",
            "settings": [
                {
                    "type": "product",
                    "id": "slide_product",
                    "label": "Product"
                },
                {
                    "type": "text",
                    "id": "slide_subtitle",
                    "label": "Subtitle"
                },
                {
                    "type": "text",
                    "id": "slide_title",
                    "label": "Title"
                },
                {
                    "type": "text",
                    "id": "slide_text",
                    "label": "Text"
                },
                {
                    "type": "image_picker",
                    "id": "image",
                    "label": "Image (Optional)"
                },
                {
                    "type": "range",
                    "id": "image_opacity",
                    "label": "Image Opacity",
                    "min": 0.1,
                    "max": 1.0,
                    "step": 0.1,
                    "default": 0.8
                }
            ]
        },
        {
            "type": "collection",
            "name": "Collection",
            "settings": [
                {
                    "type": "collection",
                    "id": "slide_collection",
                    "label": "Collection"
                },
                {
                    "type": "text",
                    "id": "slide_subtitle",
                    "label": "Subtitle"
                },
                {
                    "type": "text",
                    "id": "slide_title",
                    "label": "Title"
                },
                {
                    "type": "text",
                    "id": "slide_text",
                    "label": "Text"
                },
                {
                    "type": "image_picker",
                    "id": "image",
                    "label": "Image (Optional)"
                },
                {
                    "type": "range",
                    "id": "image_opacity",
                    "label": "Image Opacity",
                    "min": 0.1,
                    "max": 1.0,
                    "step": 0.1,
                    "default": 0.8
                }
            ]
        },
        {
            "type": "text",
            "name": "Text",
            "settings": [
                {
                    "type": "image_picker",
                    "id": "image",
                    "label": "Image"
                },
                {
                    "type": "color",
                    "id": "color",
                    "label": "Background Color",
                    "info": "If not image selected",
                    "default": "#484848"
                },
                {
                    "type": "text",
                    "id": "slide_subtitle",
                    "label": "Subtitle"
                },
                {
                    "type": "text",
                    "id": "slide_title",
                    "label": "Title"
                },
                {
                    "type": "text",
                    "id": "slide_text",
                    "label": "Text"
                },
                {
                    "type": "url",
                    "id": "destination",
                    "label": "Destination"
                },
                {
                    "type": "range",
                    "id": "image_opacity",
                    "label": "Image Opacity",
                    "min": 0.1,
                    "max": 1.0,
                    "step": 0.1,
                    "default": 0.8
                }
            ]
        }
      ],
      "presets": [
        {
          "name": "Product Highlight Slider"
        }
      ],
      "enabled_on": {
        "templates": ["*"]
      }
    }
{% endschema %}