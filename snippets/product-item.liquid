{% comment %}Is this product on sale?{% endcomment %}
{% assign on_sale = false %}
{% if product.compare_at_price > product.price %}
  {% assign on_sale = true %}
{% endif %}

<li class="product-item {% unless product.available %} sold-out{% endunless %}{% if on_sale %} on-sale{% endif %}">

  <div class="image">
    <a href="{{ product.url | within: collection }}">
      <img src="{{ product | img_url: 'grande' }}" alt="{{ product.featured_image.alt | escape }}" />
    </a>
  </div>
  
  <div class="title">
    <a href="{{ product.url | within: collection }}">
      {{ product.title }}
    </a>
  </div>

  <div class="data">
    {% if product.price_varies %}
      {{ 'From' | escape }}
    {% endif %}

    {{ product.price | money }}

    {% if on_sale %}
      <s class="compare-at-price">{{ product.compare_at_price | money }}</s>
    {% endif %}

    <span class="shopify-product-reviews-badge" data-id="{{ product.id }}"></span>
  </div>
  
</li>